@using SniffleTracker9000.Helpers
@model SniffleTracker9000.ViewModels.MainViewModel

<h1>Sniffle Tracker 9000</h1>
<p><a class="btn btn-primary btn-lg" href="#" role="button" data-bind="click: function() {executeOnServer(viewModel, '/Home/AddSniffle');}">Sniffle!</a></p>

<table class="table">
    <thead>
        <tr>
            <th>Date</th>
            <th></th>
        </tr>
    </thead>
    <tbody data-bind="foreach: Sniffles">
        <tr>
            <td data-bind="text: moment(Date()).format('ddd, MMM DD YYYY HH:mm:ss.SSS')"></td>
            <td><button type="button" class="btn btn-danger" data-bind="click: function() {executeOnServer(viewModel, '/Home/RemoveSniffle/' + $data.Id());}">&times;</button></td>
        </tr>
    </tbody>
</table>

@section scripts
{
    <script type="text/javascript">
        var $data = @Html.ToJson(Model);
        var viewModel = ko.mapping.fromJS($data);
        ko.applyBindings(viewModel);
    </script>
}